<div *ngIf="!viewEditor" class="container vertical">
    <div class="wrapper option-1 option-1-1">
        <ol class="c-stepper">
            <li [ngClass]="currentLevel === 'requirement' || requirementLevel ? 'c-stepper__item_selected': 'c-stepper__item'">
                <h6 class="c-stepper__title">Requirements</h6>
            </li>
            <li [ngClass]="currentLevel === 'epic' || epicLevel ? 'c-stepper__item_selected': 'c-stepper__item'">
                <h6 class="c-stepper__title">Epics</h6>
            </li>
            <li [ngClass]="currentLevel === 'story' || storyLevel ? 'c-stepper__item_selected': 'c-stepper__item'">
                <h6 class="c-stepper__title">Storys</h6>
            </li>
        </ol>
    </div>
    <div id="requirements" class="row section border ">
        <div class="col-2">
            <a class="new" (click)="createRequirement()">
                <!--                <div class="wrap add">-->
                <!--                    <i class="fa fa-plus" aria-hidden="true"></i>-->
                <!--                    &lt;!&ndash;<fa-icon [icon]="faPlus"></fa-icon>&ndash;&gt;-->
                <!--                </div>-->
                <div class="wrap add" style="margin-left: 25px; margin-bottom: 56px; cursor: pointer">
                    <mat-icon class="material-icons" (click)="nextReq()" style="color: white; font-size: 30px">add
                    </mat-icon>
                </div>
            </a>
        </div>
        <div class="col-2" (click)="clickReq()">
            <div class="wrap" style="border-style: dashed;" matTooltip="{{currentReq?.name}}"
                 [matTooltipPosition]="toolTipPosition">
                <h5 class="txt-overflow">{{currentReq?.name}}</h5>
                <a class="edit" (click)="editDialog(currentReq?.uuid)"><i class="fa fa-pencil"
                                                                          aria-hidden="true"></i></a>
                <div class="inner-wrap">
                    <input type="text" placeholder="Title">
                    <textarea name="descripton" cols="" rows=""></textarea>
                    <button>Submit</button>
                </div>
                <a class="delete" (click)="deleteDesign(currentReq?.uuid,'requirement')"><i class="fa fa-trash"
                                                                                            aria-hidden="true"></i></a>
                <a class="assign" (click)="assignRequirementToEpic()"><i class="fa fa-link" aria-hidden="true"></i></a>
            </div>
            <div class="add-icon">
                <mat-icon class="material-icons"
                          style="color: mediumseagreen; font-size: 50px;transform: rotate(180deg);"
                          (click)="assignRequirementToEpic()">publish
                </mat-icon>
            </div>
        </div>


        <div class="col-2">
            <div style="margin-left: 25px; margin-bottom: 56px; cursor: pointer">
                <mat-icon class="material-icons" (click)="nextReq()" style="color: #6c6c6c; font-size: 30px">last_page
                </mat-icon>
            </div>

        </div>
        <div class="col-6" style="justify-content: end; display: flex;padding-bottom: 26px;">
            <h1 style="color: #CDCDCD; font-size: 2rem">Requirements</h1>
        </div>
    </div>

    <div id="epics" class="row section border " *ngIf="existingEpics.length != 0">
        <ng-container *ngFor="let epic of existingEpics; let j = index">
            <div class="col-2" (click)="filterEpic(epic, j)">
                <div class="wrap" style="border-style: dashed;" [ngClass]="epic.selected ? 'selected' : ''"
                     matTooltip="{{epic?.name}}"
                     [matTooltipPosition]="toolTipPosition">
                    <h5 class="txt-overflow">{{epic?.name}}</h5>
                    <!--                    <a class="edit"><i class="fa fa-pencil" aria-hidden="true"></i></a>-->
                    <div class="inner-wrap">
                        <input type="text" placeholder="Title">
                        <textarea name="descripton" cols="" rows=""></textarea>
                        <button>Submit</button>
                    </div>
                    <a class="delete" (click)="deleteDesign(epic?.uuid, 'epic')"><i class="fa fa-trash"
                                                                                    aria-hidden="true"></i></a>
                    <a class="assign" (click)="addStory(selectedEpic)"><i class="fa fa-link" aria-hidden="true"></i></a>
                </div>
                <div *ngIf="epic.selected" class="add-icon">
                    <mat-icon class="material-icons"
                              style="color: slateblue; font-size: 50px;transform: rotate(180deg);"
                              (click)="addStory(selectedEpic)">publish
                    </mat-icon>
                </div>
            </div>
        </ng-container>

        <div class="watermark" style="left: 88%;">
            Epics
        </div>


        <!--        <div class="col-1" *ngIf="selectedEpicId">-->
        <!--            <a class="new" (click)="addStory(selectedEpic)">-->
        <!--                <div class="wrap add">-->
        <!--                    <i class="fa fa-plus" aria-hidden="true"></i>-->
        <!--                </div>-->
        <!--            </a>-->
        <!--        </div>-->
    </div>

    <div class="row section border row-color"  style="margin-left: 120px; cursor: pointer" *ngIf="filteredStories.length != 0" (click)="addStory(selectedEpic)">
        <div style="text-align: center;">
            <mat-icon class="material-icons"
                      style="color: slateblue; font-size: 50px;transform: rotate(180deg);">add
            </mat-icon>
        </div>
    </div>

    <div *ngIf="filteredStories.length != 0">
        <ng-container *ngFor="let story of filteredStories" >
            <div  id="stories"  class="row section border row-color"  style="margin-left: 120px">
                <div class="col-2" style="right: 20px">
                    <button mat-mini-fab (click)="generateStory(story)" aria-label="Example icon button with a delete icon" style="color: #00a74e;background-color: #ffffff ; left: -25px; top: -35px; ">
                        <mat-icon style="font-size: 25px">play_arrow</mat-icon>
                    </button>
                </div>
                <div class="col-2 wrap" matTooltip="{{story?.name}}" style="margin-right: 50px"
                     [matTooltipPosition]="toolTipPosition" (click)="loadStoryDesignEditor(story)">
                    <h5 class="txt-overflow">{{story.name}}</h5>
                    <a class="edit" (click)="editStory(currentReq?.uuid)"><i class="fa fa-pencil"
                                                                             aria-hidden="true"></i></a>
                    <!--                    <a class="edit"><i class="fa fa-pencil" aria-hidden="true"></i></a>-->
                    <div class="inner-wrap">
                        <input type="text" placeholder="Title">
                        <textarea name="descripton" cols="" rows=""></textarea>
                        <!--                        <select name="" >-->
                        <!--                            <option value="" selected>Epic 1</option>-->
                        <!--                            <option value="">Epic 2</option>-->
                        <!--                            <option value="">Epic 3</option>-->
                        <!--                        </select>-->
                        <button>Submit</button>
                    </div>
                    <a class="delete" virtuan-click-stop-propagation (click)="deleteDesign('story')"><i
                            class="fa fa-trash" aria-hidden="true"></i></a>
                </div>
                <div class="col-3 justify-content-center" style="margin-right: 30px">
                    <mat-form-field class="flex-auto" style="width: 100%">
                        <mat-label>Progress</mat-label>
                        <mat-select (selectionChange)="handleProgress($event.value)">
                            <mat-option value="1">SA</mat-option>
                            <mat-option value="2">Design in progress</mat-option>
                            <mat-option value="3">Development in progress</mat-option>
                        </mat-select>
                    </mat-form-field>
                </div>
                <div class="col-4 justify-content-center" style="margin-right: 10px">
                    <mat-progress-bar mode="determinate" class="audio-progress-bar" value='{{progressValue}}'></mat-progress-bar>
                </div>

            </div>
        </ng-container>
<!--        <div class="watermark" style="left: 88%;">-->
<!--            Stories-->
<!--        </div>-->


        <!--<div class="col-3">
            <a href="" class="new">
                <div class="wrap add">
                    <fa-icon [icon]="faPlus"></fa-icon>
                </div>
            </a>
        </div>-->
    </div>


    <!--<div id="story-details" class="row section border" >
        <div class="col-12">
            <div class="row">
                <div class="col-3 sub-sec">
                    <div class="wrap icon-wrap">
                        <fa-icon [icon]="faPerson"></fa-icon>
                    </div>
                </div>
                <div class="col-3 sub-sec">
                    <div class="wrap icon-wrap">
                        <fa-icon [icon]="faMobileScreen"></fa-icon>
                    </div>
                </div>
                <div class="col-3 sub-sec">
                    <div class="wrap icon-wrap">
                        <fa-icon [icon]="faGear"></fa-icon>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-12">
            <div class="row">
                <div class="col-3 sub-sec">
                    <div class="wrap">
                        <h3>Actor1</h3>
                        <a href="" class="edit"><fa-icon [icon]="faPencilSquare"></fa-icon></a>
                        <div class="inner-wrap">
                            <input type="text" placeholder="Actor">
                            <textarea name="descripton" id="" cols="" rows=""></textarea>
                            <button>Submit</button>
                        </div>
                        <a href="" class="delete"><fa-icon [icon]="faWindowClose"></fa-icon></a>
                    </div>
                </div>
                <div class="col-6 sub-sec">
                    <div class="row border">
                        <div class="col-6">
                            <div class="wrap screen">
                                <h3>Screen1</h3>
                                <a href="" class="edit"><fa-icon [icon]="faPencilSquare"></fa-icon></a>
                                <div class="inner-wrap">
                                    <input type="text" placeholder="Screen">
                                    <textarea name="descripton" id="" cols="" rows=""></textarea>
                                    <button>Submit</button>
                                </div>
                                <a href="" class="delete"><fa-icon [icon]="faWindowClose"></fa-icon></a>
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="wrap process">
                                <h3>Process1</h3>
                                <a href="" class="edit"><fa-icon [icon]="faPencilSquare"></fa-icon></a>
                                <div class="inner-wrap">
                                    <input type="text" placeholder="Process">
                                    <textarea name="descripton" id="" cols="" rows=""></textarea>
                                    <button>Submit</button>
                                </div>
                                <a href="" class="delete"><fa-icon [icon]="faWindowClose"></fa-icon></a>
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="wrap screen">
                                <h3>Screen1</h3>
                                <a href="" class="edit"><fa-icon [icon]="faPencilSquare"></fa-icon></a>
                                <div class="inner-wrap">
                                    <input type="text" placeholder="Screen">
                                    <textarea name="descripton" id="" cols="" rows=""></textarea>
                                    <button>Submit</button>
                                </div>
                                <a href="" class="delete"><fa-icon [icon]="faWindowClose"></fa-icon></a>
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="wrap process">
                                <h3>Process1</h3>
                                <a href="" class="edit"><fa-icon [icon]="faPencilSquare"></fa-icon></a>
                                <div class="inner-wrap">
                                    <input type="text" placeholder="Process">
                                    <textarea name="descripton" id="" cols="" rows=""></textarea>
                                    <button>Submit</button>
                                </div>
                                <a href="" class="delete"><fa-icon [icon]="faWindowClose"></fa-icon></a>
                            </div>
                        </div>
                        <div class="col-12">
                            <a href="" class="new">
                                <div class="wrap add">
                                    <fa-icon [icon]="faPlus"></fa-icon>
                                </div>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>-->
</div>

<virtuan-story-design-page
        *ngIf="viewEditor && ruleChainLoaded && ruleChainMetaDataLoaded && ruleNodeComponentsLoaded && connectionPropertyTemplatesLoaded"
        [ruleChain]="ruleChain"
        [ruleChainMetaData]="ruleChainMetaData"
        [connectionPropertyTemplates]="connectionPropertyTemplates"
        [username]="username"
        [uid]="desprojectUid"
        [ruleNodeComponents]="ruleNodeComponents"
        [serviceUuid]="storyserviceUuid"
        [projectUid]="desprojectUid"
        [storyuuid]="storyuuid"></virtuan-story-design-page>
