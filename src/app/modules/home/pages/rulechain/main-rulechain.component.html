<!--<div class="mat-content" fxFlex virtuan-fullscreen [fullscreen]="isFullscreen" virtuan-hotkeys
     fxLayout="column" class="virtuan-rulechain">
    <div>
        <div *ngIf="ruleChainLoaded && ruleChainMetaDataLoaded && ruleNodeComponentsLoaded && connectionPropertyTemplatesLoaded">
            <virtuan-rulechain-page [ruleChain]="ruleChain"
                                    [ruleChainMetaData]="ruleChainMetaData"
                                    [connectionPropertyTemplates]="connectionPropertyTemplates"
                                    [username]="username"
                                    [uid]="projectUid"
                                    [ruleNodeComponents]="ruleNodeComponents"></virtuan-rulechain-page>
            &lt;!&ndash;<router-outlet></router-outlet>&ndash;&gt;
        </div>
    </div>

</div>-->

<div style="height: 100vh;">
    <mat-toolbar >
        <div fxShow="true" fxHide.lt-md="true">
            <!-- The following menu items will be hidden on both SM and XS screen sizes -->
            <a [routerLink]="['/mainruleChains', projectUid ]" mat-button>Editor</a>
            <a [routerLink]="['/generatorChain', projectUid ]" mat-button>Generator</a>
<!--        <a href="#" mat-button>Menu Item 3</a>
            <a href="#" mat-button>Menu Item 4</a>
            <a href="#" mat-button>Menu Item 5</a>
            <a href="#" mat-button>Menu Item 6</a>-->
        </div>
    </mat-toolbar>
<div style="width: 100%; height: 900px; background: #ffffff;">

    <as-split direction="vertical">
        <!--<as-split-area [size]="15">TOP</as-split-area>-->
        <as-split-area [size]="85">
            <as-split direction="horizontal">
                <as-split-area [size]="75">

                        <!-- <router-outlet></router-outlet>-->
                    <virtuan-lamdafunction-editor *ngIf="loadFunctionEditor" [projectUid]="projectUid" [lamdafunctionUuid]="lambdauid"></virtuan-lamdafunction-editor>
                    <virtuan-rulechain-page  *ngIf="ruleChainLoaded && ruleChainMetaDataLoaded && ruleNodeComponentsLoaded && connectionPropertyTemplatesLoaded" [ruleChain]="ruleChain"
                                                     [ruleChainMetaData]="ruleChainMetaData"
                                                     [connectionPropertyTemplates]="connectionPropertyTemplates"
                                                     [username]="username"
                                                     [uid]="projectUid"
                                                     [ruleNodeComponents]="ruleNodeComponents"></virtuan-rulechain-page>

                </as-split-area>
                <as-split-area [size]="25">
                    <mat-tree [dataSource]="dataSource" [treeControl]="treeControl">
                        <mat-tree-node *matTreeNodeDef="let node" matTreeNodePadding>
                            <button mat-icon-button disabled></button>
                            <mat-icon class="mat-icon-rtl-mirror" color="primary" >
                                card_travel
                            </mat-icon>
                            <div style="margin-left: 15px">
                                {{node.name}}
                            </div>

                            <button *ngIf="!node.data.isParent" (click)="$event.stopPropagation()"
                                    [matMenuTriggerData]="{ item: node.data }"
                                    [matMenuTriggerFor]="actionsMenu"
                                    mat-icon-button
                                    type="button">
                                <mat-icon>more_vert</mat-icon>
                            </button>
                            <button mat-icon-button color="primary"  *ngIf="node.data.isParent && node.data.type != 'PARENT_MAIN_TASK'"  (click)="createPopups(node.data)" ><mat-icon>add_circle</mat-icon></button>
                        </mat-tree-node>
                        <mat-tree-node *matTreeNodeDef="let node; when: hasChild" matTreeNodePadding>
                            <button mat-icon-button
                                    [attr.aria-label]="'Toggle ' + node.name" matTreeNodeToggle>
                                <mat-icon class="mat-icon-rtl-mirror">
                                    {{treeControl.isExpanded(node) ? 'expand_more' : 'chevron_right'}}
                                </mat-icon>
                                <mat-icon class="mat-icon-rtl-mirror" color="primary">
                                    {{ treeControl.isExpanded(node) ?  "folder_open" :"folder"  }}
                                </mat-icon>
                            </button>
                            <div style="margin-left: 15px">
                                {{node.name}}
                            </div>

                            <button mat-icon-button color="primary"  *ngIf="node.data.isParent && node.data.type != 'PARENT_MAIN_TASK'"  (click)="createPopups(node.data)" ><mat-icon>add_circle</mat-icon></button>
                            <mat-progress-bar *ngIf="node.isLoading"
                                              mode="indeterminate"
                                              class="example-tree-progress-bar"></mat-progress-bar>

                        </mat-tree-node>
                    </mat-tree>
                </as-split-area>
            </as-split>
        </as-split-area>
        <as-split-area [size]="15">CONSOLE</as-split-area>

    </as-split>



</div>


<mat-menu #actionsMenu="matMenu" xPosition="before" yPosition="below">
    <ng-template let-item="item" matMenuContent>
        <button *ngIf="item.type !== 'HYBRID' && item.type !== 'EVENT'" (click)="viewComponent(item)" mat-menu-item>
            <!--<mat-icon [icIcon]="icEdit"></mat-icon>-->
            <span>View</span>
        </button>
        <button *ngIf="item.type !== 'MAIN_TASK'" (click)="edit(item)" mat-menu-item>
            <!--<mat-icon [icIcon]="icDelete"></mat-icon>-->
            <span>Edit</span>
        </button>
        <button *ngIf="item.type !== 'MAIN_TASK'" (click)="delete(item)" mat-menu-item>
            <!--<mat-icon [icIcon]="icDelete"></mat-icon>-->
            <span>Delete</span>
        </button>
    </ng-template>
</mat-menu>
</div>
